
* Digital Ocean (144.126.214.107/)
144.126.214.107
- installed nginx
https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-20-04
#+BEGIN_SRC bash
sudo apt update
sudo apt install nginx


# adjusted firewall to only allow HTTPS
sudo ufw app list
sudo ufw allow 'Nginx HTTPS'

# enable ufw firewall
sudo ufw enable

# confirm
sudo ufw status

# nginx commands
sudo systemctl stop nginx
sudo systemctl start nginx
sudo systemctl restart nginx
sudo systemctl reload nginx

#+END_SRC

NOTE:  I created a Cloudflare DNS record that points to DigitalOcean.  This record configures ALL traffic to digitalocean be
proxied through Cloudflare.  This means my droplet is not accessible directly but only through cloudflare.  

* commands
#+BEGIN_SRC zsh
bundle install

bin/rails s

bin/rails test test/controllers/sessions_controller_test.rb

# create database
RAILS_ENV=production bundle exec rake db:create
RAILS_ENV=production bundle exec rake db:migrate

# start unicorn daemon
RAILS_ENV=production unicorn -c config/unicorn.rb -D

# get PID of master unicorn process
ps -ef | grep unicorn | grep master

# kill master process
kill -USR2 <master_pid>
#+END_SRC
* data model
#+BEGIN_SRC 
POSTS
----------
id
title
html
created-at
updated-at
#+END_SRC

* presigned url

#+BEGIN_SRC bash
curl -X PUT "https://portfolio-assets.7b678ec40bb4006aca9b44d1cb69fdf6.r2.cloudflarestorage.com/test.jpg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=e41a810bb4fa8840724f4414acebcb30%2F20260119%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20260119T010745Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=1dfd5e0994bdbfda83cb99e9301783c857e699934fa3dca090f91752601cb53c" --data-binary @/Users/robertcarter/Desktop/test.jpg


# https://7b678ec40bb4006aca9b44d1cb69fdf6.r2.cloudflarestorage.com
# 7b678ec40bb4006aca9b44d1cb69fdf6
# https://7b678ec40bb4006aca9b44d1cb69fdf6.r2.cloudflarestorage.com/portfolio-assets
#+END_SRC
